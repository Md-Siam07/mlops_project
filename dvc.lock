schema: '2.0'
stages:
  data:
    cmd: make data
    deps:
    - path: src/data/make_dataset.py
      md5: 16a344863da4bc5797f0b9e217cb69ff
      size: 1341
    outs:
    - path: data/raw
      md5: 87bb5025b342dce499fe38b06aba7132.dir
      size: 89823
      nfiles: 2
  prepare:
    cmd: make prepare
    deps:
    - path: data/raw/train.csv
      md5: 61fdd54abdbf6a85b778e937122e1194
      size: 61194
    - path: src/prepare/prepare_data.py
      md5: 6bdafc67e7e2dec3a6d0536b5fd2555e
      size: 3457
    params:
      params.yaml:
        dataset.target: Survived
        prepare.drop.cols:
        - Name
        - Ticket
        prepare.missing.cat_cols:
        - Cabin
        - Embarked
        prepare.missing.num_cols:
        - Age
        prepare.random_state: 3141592
        prepare.split: 0.2
    outs:
    - path: data/prepared
      md5: 746a8034073b4e5f9851d0f9c8512dc3.dir
      size: 31634
      nfiles: 2
    - path: models/pre_processing.joblib
      md5: c2ddfc2c926d9ff11de03fad06d5e792
      size: 2462
  featurize:
    cmd: make features
    deps:
    - path: data/raw/test.csv
      md5: 029c9cd22461f6dbe8d9ab01def965c6
      size: 28629
    - path: data/raw/train.csv
      md5: 61fdd54abdbf6a85b778e937122e1194
      size: 61194
    - path: src/features/build_features.py
      md5: f10301f9f6e7799bbaebf71d32e83d42
      size: 4843
    params:
      params.yaml:
        dataset.target: Survived
        featurize.boolean:
        - SibSp
        - Parch
        featurize.count:
        - SibSp
        - Parch
        featurize.discretize:
        - Fare
        featurize.title:
        - Name
        prepare.missing.categorical:
        - Embarked
        prepare.missing.numerical:
        - Age
        prepare.random_state: 3141592
        prepare.split: 0.3
        prepare.stratify: y
    outs:
    - path: data/processed
      md5: 3b51f88ac0cf1a9c0116679196d5e4e9.dir
      size: 173242
      nfiles: 2
    - path: models/featurize.joblib
      md5: 6574c41143d10d0c633893e0db1c71c1
      size: 2575
  train:
    cmd: make train
    deps:
    - path: data/processed/train.joblib
      md5: 81caf6a8730321b9e882bf6c5d712532
      size: 120701
    - path: src/models/train_model.py
      md5: 44fbcb6d3af03e9202ba590532c09bc1
      size: 1907
    params:
      params.yaml:
        dataset.target: Survived
        train.classifier: RandomForestClassifier
        train.classifier_args:
          random_state: 2077
          n_estimators: 10
          min_samples_split: 20
          n_jobs: -1
    outs:
    - path: models/model.joblib
      md5: 6807b40f917087b2934edb8dbdb4e417
      size: 67180
  evaluate:
    cmd: make evaluation
    deps:
    - path: data/processed/test.joblib
      md5: bfa765d023d92a798a47bbf139fcd41d
      size: 52541
    - path: models/model.joblib
      md5: 6807b40f917087b2934edb8dbdb4e417
      size: 67180
    - path: src/models/evaluate_model.py
      md5: b18738b91d98e02ef24ef414ac52479c
      size: 3406
    params:
      params.yaml:
        dataset.target: Survived
    outs:
    - path: reports/cfm.json
      md5: 5be6204133b38bc2ecfa518f211ca1b6
      size: 19585
    - path: reports/prc.json
      md5: 7f731658026ca253adf58b359cd2b1ff
      size: 22811
    - path: reports/roc.json
      md5: 80f3f5de9a42b7eb29cc3032b680d9c0
      size: 15333
    - path: reports/scores.json
      md5: 37124d3cf7f3241e69d18182faf450c0
      size: 232
